# 部署功能描述

1. 在 Mantle 部署 HotTreasury、MainTreasury、DepositWalletFactory 三个合约，使用可升级合约模式进行部署
2. 将 Arbitrum 的 MainTreasury 代理合约升级更换为 HotTreasury 的 implementation

# 部署步骤

1. 切换到 v1 分支进行部署
2. 查询出 HotTreasury、MainTreasury 两个代理合约在 Arbitrum 上部署时对应的 nonce 值，分别为 5 和 7
3. 使用以下命令先尝试部署单独合约，部署后最后一笔交易的 nonce 值为 3：
   npx hardhat run scripts/deploy.ts --network mantle
4. scripts/deploy_upgrades.ts 文件中，注释掉 MainTreasury、Verifier 和 DepositWalletFactory 的部署脚本，只保留 HotTreasury 部分的部署脚本
5. 执行以下命令部署 HotTreasury，nonce 为 4 的交易会创建 ProxyAdmin 合约，nonce 为 5 的则是 HotTreasury 合约:
   npx hardhat run scripts/deploy_upgrades.ts --network mantle
6. scripts/deploy_upgrades.ts 文件中，注释掉 HotTreasury 部分的部署脚本，解注释 MainTreasury 的部署脚本，然后执行以下命令：
   npx hardhat run scripts/deploy_upgrades.ts --network mantle
7. 以上命令需要执行两次，才能让 nonce 值达到 7
8. 切换到 Arbitrum 区块链浏览器，打开 MainTreasury 的 admin 合约（0x4de7597282b6d8932372951Ba0FE463D85339e22），执行 upgrade 函数，参数 proxy 为 MainTreasury 的 proxy 合约，implementation 参数设为 HotTreasury 的 implementation 地址，即 0x54196c33c1272F8740AfB24e9c7fce61fD2dff17
